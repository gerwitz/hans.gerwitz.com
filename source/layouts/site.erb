<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="middleman">
    <meta name="viewport" content="width=512">
<%
  title = current_page.data.title || "hans.gerwitz.com"
  abstract = current_page.data.abstract || title
  tags = ['gerwitz', 'hans gerwitz']
  if current_page.data.tags
    tags += current_page.data.tags
  end
%>
    <title><%= title %></title>

    <!-- OpenID delegation -->
    <link rel="openid2.provider" href="https://openid.stackexchange.com/openid/provider">
    <link rel="openid2.local_id" href="https://openid.stackexchange.com/user/d6fc3e55-7717-4688-8e57-55fce40c106c">

    <!-- favicon -->
    <link rel="icon" href="/assets/tree.png" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/tree.png" type="image/x-icon">

    <!-- basic SEO -->
    <meta name="keywords" content="<%= tags.join(', ') %>">
    <meta name="description" content="<%= abstract %>">

    <!-- Google+ attribution for rich search snippets -->
    <link rel="author" href="https://plus.google.com/117303083576651952409">

    <!-- Twitter summary card -->
    <meta property="twitter:creator:id" content="521">
    <meta property="twitter:title" content="<%= title %>">
    <meta property="twitter:description" content="<%= abstract %>">

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="hans.gerwitz.com">
    <meta property="og:type" content="article">
    <meta property="og:url" content="<%= current_page.url %>">
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= abstract %>">
    <meta property="og:image" content="/assets/tree.png">

    <!-- RSS feed -->
    <link rel="alternate" type="application/atom+xml" href="/feed/atom.xml" title="Writings of Hans Gerwitz">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <%= stylesheet_link_tag "all" %>
    <%= javascript_include_tag  "all" %>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"   integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="   crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>

    <!-- modified <%= File.mtime(current_page.source_file).iso8601 %> -->
    <%= yield_content :head_content %>
  </head>

  <body class="<%= page_classes %>">

  <header>
    <div id="dickbar">
      <h1><%= nav_link 'hans.gerwitz.com', '/' %></h1>
    </div>
    <div class="nav">
      <ul>
        <li>
          <%= nav_link(
            'Home',
            '/'
          ) %>
        </li>
        <li>
          <%= nav_link(
            'Library',
            '/library/'
          ) %>
        </li>
        <li>
          <%= nav_link(
            'About',
            '/about.html'
          ) %>
        </li><!--
        <li>
          <%= nav_link(
            'Laboratory</a>',
            '/projects/'
          ) %>
        </li>
  -->
      </ul>
      <form method="get" action="/search.html" class="search">
        <input id = "search" type="search" placeholder="search" name="query" />
      </form>
    </div>
  </header>

  <%= yield %>

  <footer>
    <nav>
      <ul>
<!--
                <li>
                  <%= nav_link(
                        'Archives',
                        '/archive/',
                        title: 'All writings'
                  ) %>
        </li>
-->
        <li>
                  <%= nav_link(
                        'Colophon',
                        '/site/',
                        title: 'About this site'
                  ) %>
        </li>
        <li>
          <a href="/feed/atom.xml" rel="alternate" type="application/atom+xml">
            Feed
          </a>
        </li>
      </ul>
    </nav>
  </footer>

    <!-- header shadow-on-scroll -->
    <script type="text/javascript">
        var dickbar = document.getElementById("dickbar");
        var distance = dickbar.offsetHeight-10;
        var handleScroll = function () {
            if (dickbar) {
                var offset = 0.0;
                var scrollPosition = window.pageYOffset;
                if (scrollPosition < distance) {
                    offset = (distance - scrollPosition) / distance;
                    var opacity = 1.0 - (offset * 1.0);
                    dickbar.style["border-bottom"] = "none";
                    dickbar.style["boxShadow"] = "0px 4px 4px -4px rgba(50, 50, 50, " + opacity + ")";
                } else {
                    dickbar.style["border-bottom"] = "solid 2px black";
                }
            }
        }
        if (window.addEventListener) {
            window.addEventListener("scroll", handleScroll);
            window.addEventListener("touchmove", handleScroll);
        }
    </script>

    <!-- Google Analytics (async) -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-271475-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

  </body>
</html>
